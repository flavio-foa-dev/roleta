<!DOCTYPE html>
<html lang="pt-BR">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<head>
    <title>Jogo do Tigrinho</title>
    <style>
        body {
            background-color: #333;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .slot-machine {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 250px; /* Altura da m√°quina ca√ßa-n√≠queis */
        }

        .reel-container {
            width: 90px;
            height: 190px; /* Altura da coluna de rota√ß√£o */
            border: 4px dotted rgb(141, 74, 20);
            margin: 0 10px;
            overflow: hidden;
            display: inline-block;
            position: relative;
            padding-top: 15px;
        }

        .reel {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: absolute;
        }

        .symbol {
            font-size: 48px;
            padding: 1px;
            color: #FFD700;
        }

        .info {
            text-align: center;
            font-size: 20px;
            margin-top: 20px;
        }

        .marker {
            width: 100%;
            height: 4px;
            background-color: red;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: none;
            z-index: 1; /* Certifique-se de que a linha esteja acima das colunas */
        }

        .button-container {
            text-align: center;
            margin-top: 20px;
        }

        .button {
            display: inline-block;
            margin: 7px;
            font-size: 23px;
            padding: 10px 20px;
            border: none;
            background-color: #0074cc;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
            border-radius: 10px;
            width: 32%;

        }
        #girar {
            width: 69%;
            padding: 25px 0;
        }

        .button:hover {
            background-color: #005ea6;
        }

    footer {
    background-color: #333;
    color: rgba(255, 255, 255, 0.5); /* Cor com opacidade (alpha) de 0.8 */
    text-align: center;
    padding: 10px 0px 10px 0px;
    position: fixed;
    bottom: 0;
    width: 100%;
    }

footer p {
    margin: 0;
}

footer a {
    text-decoration: none;
    color: rgba(255, 255, 255, 1); /* Cor do texto com opacidade 1 (sem opacidade) */
}

footer a img {
    width: 20px; /* Ajuste o tamanho da imagem conforme necess√°rio */
    margin-bottom: -5px; /* Ajuste para alinhar melhor a imagem e o texto */
}

button#toggleSoundButton {
    font-size: 16px;
    padding: 10px 20px;
    border: none;
    background-color:#0074cc; /* Cor de fundo do bot√£o */
    color: white;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

button#toggleSoundButton:hover {
    background-color: #005ea6; /* Cor de fundo do bot√£o ao passar o mouse */
}
    </style>
</head>
<body>
    <h1>Jogo do Tigrinho</h1>

    <div class="slot-machine">
        <div class="reel-container" id="reel-container1">
            <div class="reel" id="reel1">
                <div class="symbol">üçí</div>
                <div class="symbol">üçä</div>
                <div class="symbol">üçá</div>
                <div class="symbol">üîî</div>
                <div class="symbol">üí∞</div>
                <div class="symbol">‚≠ê</div>
            </div>
            <div class="marker"></div>
        </div>
        <div class="reel-container" id="reel-container2">
            <div class="reel" id="reel2">
                <div class="symbol">üçí</div>
                <div class="symbol">üçä</div>
                <div class="symbol">üçá</div>
                <div class="symbol">üîî</div>
                <div class="symbol">üí∞</div>
                <div class="symbol">‚≠ê</div>
            </div>
            <div class="marker"></div>
        </div>
        <div class="reel-container" id="reel-container3">
            <div class "reel" id="reel3">
                <div class="symbol">üçí</div>
                <div class="symbol">üçä</div>
                <div class="symbol">üçá</div>
                <div class="symbol">üîî</div>
                <div class="symbol">üí∞</div>
                <div class="symbol">‚≠ê</div>
            </div>
            <div class="marker"></div>
        </div>
    </div>

    <div class="info">
        <p id="info-message"></p> <!-- Mensagem de informa√ß√£o adicionada -->
        <p>Seu saldo: <span id="saldo">100</span></p>
        <p>Ganhos: <span id="ganhos">0</span></p>
        <p>Aposta: <span id="aposta">10</span></p>
    </div>

    <div class="button-container">
        <button class="button" id="girar">Girar</button>
        <button class="button" id="apostar">Apostar 10</button>
        <button class="button" id="adicionar-dinheiro">Adicionar Dinheiro</button> <!-- Novo bot√£o -->
        <button id="toggleSoundButton">Som: Ligado</button>
    </div>

    <audio id="spinSound" src="./audio/gostart.wav"></audio>
    <audio id="winSound" src="./audio/video-game-6.wav"></audio>
    <audio id="buttonClickSound" src="./audio/video-game-4.wav"></audio> <!-- Novo √°udio para o bot√£o de girar -->

    <footer>
        <p>&copy; <span id="year"></span> Jogo do Tigrinho | Desenvolvido por Flavio-foa <a href="https://github.com/flavio-foa-dev/roleta" target="_blank"><img src="./img/github-logo.svg" alt="GitHub"></a></p>
    </footer>

    <script>
        let saldo = 100;
        let ganhos = 0;
        let aposta = 10;
        let apostasRealizadas = 0;
        let giradas = [0, 0, 0]; // Contador de giradas para cada coluna
        let maxGiradas = 3; // N√∫mero m√°ximo de giradas para cada coluna
        let reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
        let reelContainers = [document.getElementById('reel-container1'), document.getElementById('reel-container2'), document.getElementById('reel-container3')];
        let apostarButton = document.getElementById('apostar');
        let girarButton = document.getElementById('girar');
        let adicionarDinheiroButton = document.getElementById('adicionar-dinheiro'); // Novo bot√£o
        let saldoSpan = document.getElementById('saldo');
        let ganhosSpan = document.getElementById('ganhos');
        let apostaSpan = document.getElementById('aposta');
        let spinSound = document.getElementById('spinSound');
        let winSound = document.getElementById('winSound');
        let infoMessage = document.getElementById('info-message'); // Elemento de mensagem adicionado
        let buttonClickSound = document.getElementById('buttonClickSound');
        const toggleSoundButton = document.getElementById('toggleSoundButton');
        let soundEnabled = true;


        // Adicionando som de entrada no jogo
        window.onload = function () {
            if (soundEnabled) {
                playSound('spinSound')
            }
        };

        toggleSoundButton.addEventListener('click', function() {
        soundEnabled = !soundEnabled;
        toggleSoundButton.textContent = soundEnabled ? 'Som: Ligado' : 'Som: Desligado';


        });

        apostarButton.addEventListener('click', function () {
            console.log("Bot√£o Apostar clicado");
            if (saldo >= aposta) {
                saldo -= aposta;
                saldoSpan.textContent = saldo;
                apostasRealizadas++;
                if (apostasRealizadas % 5 === 0) {
                    aposta = 10;
                }
                apostaSpan.textContent = aposta;
                ganhosSpan.textContent = ganhos;
                girarButton.disabled = false;
            }
        });

        adicionarDinheiroButton.addEventListener('click', function () {
            console.log("Bot√£o Adicionar Dinheiro clicado");
            saldo += 50; // Adiciona R$50 ao saldo
            saldoSpan.textContent = saldo;
        });

        function girarReel(reel, delay, colunaIndex) {
            return new Promise(resolve => {
                setTimeout(() => {
                    const symbols = ['üçí', 'üçä']; // Adicionando tigrinho e coelhinho
                    let i = 0;
                    let interval = setInterval(() => {
                        reel.innerHTML = '';
                        for (let j = 0; j < 3; j++) {
                            const randomIndex = Math.floor(Math.random() * symbols.length);
                            const symbol = document.createElement('div');
                            symbol.classList.add('symbol');
                            symbol.textContent = symbols[randomIndex];
                            reel.appendChild(symbol);
                        }
                        i++;
                        if (i === maxGiradas * symbols.length) {
                            clearInterval(interval);
                            resolve(colunaIndex);
                        }
                    }, 100);
                    giradas[colunaIndex]++;
                }, delay);
            });
        }

    function checkWin() {
    console.log("Verificando vit√≥ria");
    let markers = document.querySelectorAll('.marker');
    let symbols = [];

    // Adicione a classe 'marker' para destacar a linha do meio
    for (let i = 0; i < reelContainers.length; i++) {
      const marker = reelContainers[i].querySelector('.marker');
      marker.style.display = 'block';
      const symbol = reels[i].querySelector('.symbol:nth-child(2)').textContent;
      symbols.push(symbol);
    }

    if (symbols[0] === symbols[1] && symbols[1] === symbols[2]) {
      saldo += aposta * 3;
      ganhos += aposta * 3;
      saldoSpan.textContent = saldo;
      ganhosSpan.textContent = ganhos;
      if (soundEnabled) {
          winSound.play();
      }
      showInfoMessage("Voc√™ ganhou!");
      rodadasVitoriosas++;
    } else {

      showInfoMessage("Tente novamente. Fa√ßa sua aposta.");

      for (let i = 0; i < giradas.length; i++) {
        if (giradas[i] < maxGiradas) {
          girarButton.disabled = false;
          break;
        }
      }

      // Resete as rodadas vitoriosas se o jogador n√£o ganhar
      rodadasVitoriosas = 0;
    }

    // Mostra uma mensagem se o jogador ganhar tr√™s vezes consecutivas
    if (rodadasVitoriosas >= 3) {
      showInfoMessage("Tr√™s vit√≥rias consecutivas! Parab√©ns!");
    }

    giradas = [0, 0, 0]; // Resetar contadores de giradas
    girarButton.disabled = false; // Habilitar o bot√£o de girar novamente
  }

        function showInfoMessage(message) {
            infoMessage.textContent = message;
            infoMessage.style.display = 'block';
            setTimeout(() => {
                infoMessage.style.display = 'none';
            }, 1000);
        }

        girarButton.addEventListener('click', async function () {
            console.log("Bot√£o Girar clicado");
            if (saldo >= aposta) {
                saldo -= aposta;
                saldoSpan.textContent = saldo;

                girarButton.disabled = true;
                if (soundEnabled) {
                     buttonClickSound.play(); // Tocar som do bot√£o de girar
                }


                const results = await Promise.all(reels.map((reel, index) => {
                    const resultSymbol = getSymbol();
                    return girarReel(reel, index * 500, index);
                }));

                setTimeout(() => {
                    checkWin();
                   // spinSound.play();
                }, 1000);
            } else {
                showInfoMessage("Sem saldo. Adicione mais dinheiro para continuar.");
                girarButton.disabled = false;
            }
        });

        function getSymbol() {
            const symbols = ['üçí', 'üçä', 'üçá', 'üîî', 'üí∞', '‚≠ê', 'üêØ', 'üê∞']; // Adicionando tigrinho e coelhinho
            const randomIndex = Math.floor(Math.random() * symbols.length);
            return symbols[randomIndex];
        }

        function playSound(soundId) {
            const sound = document.getElementById(soundId);
            if (sound) {
                sound.play();
            }
        }
    </script>

</body>
</html>
